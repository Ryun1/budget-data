# Cardano Network Configuration (Mainnet)
store.cardano.host=backbone.cardano.iog.io
store.cardano.port=3001
store.cardano.protocol-magic=764824073

# Sync Start Point (mainnet slot and block hash)
store.cardano.sync-start-slot=160964954
store.cardano.sync-start-blockhash=560c7537831007f9670d287b15a69ba18a322b1edc39c0c23ccab3c12ad77b9f

# Database Configuration - Uses environment variables from Render
# URL is set via SPRING_DATASOURCE_URL env var (converted to JDBC format by entrypoint)
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:postgres}

# HikariCP Connection Pool (conservative for shared DB)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000

# JPA/Hibernate Configuration - tables created by init-schema.sql
# Using 'none' mode since we pre-create tables via SQL script in entrypoint
# This avoids Hibernate type mapping errors with YACI Store's custom types
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.default_schema=yaci_store
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true

# Logging
logging.level.com.bloxbean.cardano.yaci.core.protocol.keepalive=INFO
logging.level.com.bloxbean.cardano.yaci.store.core.service=INFO

# Store Configuration - Enable what we need for administration data tracking
store.blocks.enabled=true
store.transaction.enabled=true
store.utxo.enabled=true
store.metadata.enabled=true

# Disable unnecessary stores to reduce resource usage
store.assets.enabled=false
store.epoch.enabled=false
store.mir.enabled=false
store.script.enabled=false
store.staking.enabled=false
store.governance.enabled=false

# Disable aggregation modules
store.epoch-aggr.enabled=false
store.account.enabled=false

# Storage Optimization - Disable unnecessary data storage
store.blocks.save-cbor=false
store.transaction.save-cbor=false
store.transaction.save-witness=false

# UTXO Pruning - Remove spent UTXOs to save space
store.utxo.pruning-enabled=true
store.utxo.pruning.interval=600
store.utxo.pruning-safe-blocks=2160
store.utxo.pruning-batch-size=3000

# Parallel Processing (reduced for Render's resource constraints)
store.executor.enable-parallel-processing=true
store.executor.blocks-batch-size=50
store.executor.blocks-partition-size=5
store.executor.use-virtual-thread-for-batch-processing=true
store.executor.use-virtual-thread-for-event-processing=true

# DB batch settings (reduced for shared DB)
store.db.batch-size=500
store.db.parallel-insert=true

# Auto index management
store.auto-index-management=true

# API Configuration
server.port=8080
apiPrefix=/api/v1
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.show-details=always

# Virtual threads
spring.threads.virtual.enabled=true

# Auto-start sync
store.sync-auto-start=true

# Enable plugins profile
spring.profiles.active=plugins

# Plugin logging
logging.level.com.bloxbean.cardano.yaci.store.plugin=INFO
